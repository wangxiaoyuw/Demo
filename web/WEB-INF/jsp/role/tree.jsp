<!DOCTYPE html><%@ page contentType="text/html;charset=UTF-8" language="java" %><!doctype html><%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %><c:set var="ctx" value="${pageContext.request.contextPath}"/><HTML><HEAD>    <TITLE> ZTREE DEMO - checkbox</TITLE>    <meta http-equiv="content-type" content="text/html; charset=UTF-8">    <link rel="stylesheet" href="../../assets01/css/demo.css" type="text/css">    <link rel="stylesheet" href="../../assets01/css/zTreeStyle.css" type="text/css">    <script type="text/javascript" src="../../assets01/js/jquery-1.4.4.min.js"></script>    <script type="text/javascript" src="../../assets01/js/jquery.ztree.core.js"></script>    <script type="text/javascript" src="../../assets01/js/jquery.ztree.excheck.js"></script>    <!--    <script type="text/javascript" src="../../../js/jquery.ztree.exedit.js"></script>    -->    <SCRIPT type="text/javascript">        <!--        var setting = {            check: {                enable: true            },            data: {                simpleData: {                    enable: true                }            }        };       /* var zNodes =[            { id:1, pId:0, name:"随意勾选 1", open:true},            { id:11, pId:1, name:"随意勾选 1-1", open:true},            { id:111, pId:11, name:"随意勾选 1-1-1"},            { id:112, pId:11, name:"随意勾选 1-1-2"},            { id:12, pId:1, name:"随意勾选 1-2", open:true},            { id:121, pId:12, name:"随意勾选 1-2-1"},            { id:122, pId:12, name:"随意勾选 1-2-2"},            { id:2, pId:0, name:"随意勾选 2", checked:true, open:true},            { id:21, pId:2, name:"随意勾选 2-1"},            { id:22, pId:2, name:"随意勾选 2-2", open:true},            { id:221, pId:22, name:"随意勾选 2-2-1", checked:true},            { id:222, pId:22, name:"随意勾选 2-2-2"},            { id:23, pId:2, name:"随意勾选 2-3"}        ];*/        var code;        function setCheck() {            var zTree = $.fn.zTree.getZTreeObj("treeDemo"),                py = $("#py").attr("checked")? "p":"",                sy = $("#sy").attr("checked")? "s":"",                pn = $("#pn").attr("checked")? "p":"",                sn = $("#sn").attr("checked")? "s":"",                type = { "Y":py + sy, "N":pn + sn};            zTree.setting.check.chkboxType = type;            showCode('setting.check.chkboxType = { "Y" : "' + type.Y + '", "N" : "' + type.N + '" };');        }        function showCode(str) {            if (!code) code = $("#code");            code.empty();            code.append("<li>"+str+"</li>");        }      /*  $(document).ready(function(){            $.post("/role/treedata",function (zNodes) {                $.fn.zTree.init($("#treeDemo"), setting, zNodes);                setCheck();                $("#py").bind("change", setCheck);                $("#sy").bind("change", setCheck);                $("#pn").bind("change", setCheck);                $("#sn").bind("change", setCheck);            })        });*/        //显示所有节点，并回显选中的节点        $(document).ready(function(){            $.ajax({                type:"post",                url:"/role/treedata",                dataType:"json",                async:false,                success:function (zNodes) {                    zTreeObj = $.fn.zTree.init($("#treeDemo"),setting,zNodes);                    zTreeObj.expandAll(true);                    var nodes = zTreeObj.getNodes();                    var array = zTreeObj.transformToArray(nodes);                    var id = $("#id").val();                    $.ajax({                        type:"post",                        url:"/role/showtree1",                        data:{id:id},                        async:false,                        success:function (treeJson) {                            for (var i in array){                                for(var j in treeJson){                                    if (!array[i].isParent){                                        if (array[i].id==treeJson[j].id){                                            zTreeObj.checkNode(array[i],true,true)                                        }                                    }                                }                            }                        }                    })                }            })        });        //获取选中节点        function onCheck(){            //此方法选中节点，得到选中节点的id            var treeObj=$.fn.zTree.getZTreeObj("treeDemo");            var nodes=treeObj.getCheckedNodes(true);            var ids = new Array();            for(var i=0;i<nodes.length;i++){                //获取选中节点的值                ids.push(nodes[i].id);            }           var id = $("#id").val();            var idstr = ids.toString();            ajaxSubmit(id,idstr);        }        //角色-菜单信息入库        function ajaxSubmit(id,idstr){alert(idstr)            $.post("${ctx}/role/save",{"id":id,"mid":idstr},function(obj){                $.messager.alert('提示',obj.msg);                $("#menuWindow").window('close');            },'json');        }    </SCRIPT></HEAD><BODY><h1>Checkbox 勾选操作</h1><h6>[ 文件路径: excheck/checkbox.html ]</h6><div class="content_wrap">    <div class="zTreeDemoBackground left">        <ul id="treeDemo" class="ztree"></ul>    </div>    <div class="right">        <ul class="info">            <li class="title"><h2>1、setting 配置信息说明</h2>                <ul class="list">                    <li class="highlight_red">使用 checkbox，必须设置 setting.check 中的各个属性，详细请参见 API 文档中的相关内容</li>                    <li><p>父子关联关系：<br/>                        被勾选时：<input type="checkbox" id="py" class="checkbox first" checked /><span>关联父</span>                        <input type="checkbox" id="sy" class="checkbox first" checked /><span>关联子</span><br/>                        取消勾选时：<input type="checkbox" id="pn" class="checkbox first" checked /><span>关联父</span>                        <input type="checkbox" id="sn" class="checkbox first" checked /><span>关联子</span><br/>                        <ul id="code" class="log" style="height:20px;"></ul></p>                    </li>                </ul>            </li>            <div id="menuWindowfooter" style="padding:5px;text-align:right;">                <input id="id" value="${id}">                <a href="#" onclick="onCheck();" class="easyui-linkbutton" data-options="iconCls:'icon-save'">提交</a>            </div>            <li class="title"><h2>2、treeNode 节点数据说明</h2>                <ul class="list">                    <li class="highlight_red">1)、如果需要初始化默认节点被勾选，请设置 treeNode.checked 属性，详细请参见 API 文档中的相关内容</li>                    <li class="highlight_red">2)、如果某节点禁用 checkbox，请设置 treeNode.chkDisabled 属性，详细请参见 API 文档中的相关内容 和 'chkDisabled 演示'</li>                    <li class="highlight_red">3)、如果某节点不显示 checkbox，请设置 treeNode.nocheck 属性，详细请参见 API 文档中的相关内容 和 'nocheck 演示'</li>                    <li class="highlight_red">4)、如果更换 checked 属性，请参考 API 文档中 setting.data.key.checked 的详细说明</li>                    <li>5)、其他请参考 API 文档中 treeNode.checkedOld / getCheckStatus / check_Child_State / check_Focus 的详细说明</li>                </ul>            </li>        </ul>    </div></div></BODY></HTML>